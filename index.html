<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker 2025/2026 - Dashboard Oficial</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-green-800 to-green-900 text-white min-h-screen">
    
    <!-- Header -->
    <header class="bg-green-900/80 backdrop-blur-sm border-b border-green-700 sticky top-0 z-20">
        <div class="max-w-md mx-auto px-4 py-4">
            <div class="flex items-center gap-3">
                <div class="text-3xl">🃏</div>
                <div>
                    <div class="text-xs uppercase opacity-80">Texas Hold'em Poker</div>
                    <h1 class="text-xl font-bold text-yellow-400">Poker 2025/2026</h1>
                </div>
                <div class="ml-auto flex gap-2">
                    <button onclick="exportData()" class="px-3 py-1 bg-blue-600 rounded text-sm">📤</button>
                    <label class="px-3 py-1 bg-purple-600 rounded text-sm cursor-pointer">
                        📥
                        <input type="file" class="hidden" onchange="importData(event)">
                    </label>
                </div>
            </div>
            
            <nav class="mt-3 grid grid-cols-4 gap-2 text-xs">
                <button onclick="setTab('dashboard')" id="btn-dashboard" class="py-2 bg-green-700 rounded font-semibold">🏠 Inicio</button>
                <button onclick="setTab('jugadores')" id="btn-jugadores" class="py-2 bg-green-800 rounded">👥 Jugadores</button>
                <button onclick="setTab('partidas')" id="btn-partidas" class="py-2 bg-green-800 rounded">🗓️ Partidas</button>
                <button onclick="setTab('reglas')" id="btn-reglas" class="py-2 bg-green-800 rounded">📜 Reglas</button>
            </nav>
        </div>
    </header>

    <!-- Contenido -->
    <main id="content" class="max-w-md mx-auto p-4 pb-20">
        <div class="text-center py-8">
            <div class="text-4xl mb-4">🎮</div>
            <div class="font-bold text-lg">¡Bienvenido al Dashboard!</div>
            <div class="text-sm opacity-80 mt-2">Cargando datos del torneo...</div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="fixed bottom-0 w-full bg-green-900/90 backdrop-blur-sm border-t border-green-700">
        <div class="max-w-md mx-auto p-3 grid grid-cols-3 gap-2 text-xs">
            <button onclick="setTab('jugadores')" class="py-2 bg-green-700 rounded font-semibold">👥 Editar</button>
            <button onclick="shareData()" class="py-2 bg-blue-600 rounded font-semibold">🔗 Compartir</button>
            <button onclick="addPlayer()" class="py-2 bg-purple-600 rounded font-semibold">➕ Jugador</button>
        </div>
    </footer>

    <script>
        // Datos del torneo
        let appData = {
            players: [],
            matches: []
        };

        // Inicializar
        function init() {
            loadData();
            setTab('dashboard');
        }

        // Cargar datos
        function loadData() {
            const saved = localStorage.getItem('poker_data');
            if (saved) {
                appData = JSON.parse(saved);
            } else {
                // Crear jugadores por defecto
                for (let i = 1; i <= 15; i++) {
                    appData.players.push({
                        id: i,
                        name: `Jugador ${i}`,
                        paid: false,
                        points: Math.floor(Math.random() * 50) // Puntos de ejemplo
                    });
                }
                saveData();
            }
        }

        // Guardar datos
        function saveData() {
            localStorage.setItem('poker_data', JSON.stringify(appData));
        }

        // Cambiar pestaña
        function setTab(tab) {
            // Resetear botones
            document.querySelectorAll('nav button').forEach(btn => {
                btn.className = 'py-2 bg-green-800 rounded';
            });
            
            // Activar botón actual
            const activeBtn = document.getElementById(`btn-${tab}`);
            if (activeBtn) {
                activeBtn.className = 'py-2 bg-green-700 rounded font-semibold';
            }

            // Mostrar contenido
            const content = document.getElementById('content');
            
            switch(tab) {
                case 'dashboard':
                    content.innerHTML = renderDashboard();
                    break;
                case 'jugadores':
                    content.innerHTML = renderJugadores();
                    break;
                case 'partidas':
                    content.innerHTML = renderPartidas();
                    break;
                case 'reglas':
                    content.innerHTML = renderReglas();
                    break;
            }
        }

        // Renderizar dashboard
        function renderDashboard() {
            const sortedPlayers = [...appData.players].sort((a, b) => b.points - a.points);
            const paidCount = appData.players.filter(p => p.paid).length;
            
            return `
                <div class="space-y-4">
                    <!-- Estadísticas -->
                    <div class="bg-green-800/50 rounded-xl p-4 border border-green-700">
                        <h2 class="text-lg font-bold mb-3">📊 Estadísticas</h2>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <div class="text-2xl font-bold text-yellow-400">${paidCount}</div>
                                <div class="text-xs opacity-80">Pagados</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-green-400">${appData.players.length}</div>
                                <div class="text-xs opacity-80">Jugadores</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-blue-400">$${paidCount * 50}</div>
                                <div class="text-xs opacity-80">Bote</div>
                            </div>
                        </div>
                    </div>

                    <!-- Clasificación -->
                    <div class="bg-green-800/50 rounded-xl p-4 border border-green-700">
                        <h2 class="text-lg font-bold mb-3">🏆 Top 6 Clasificación</h2>
                        <div class="space-y-2">
                            ${sortedPlayers.slice(0, 6).map((player, idx) => `
                                <div class="flex items-center justify-between p-3 rounded-lg ${
                                    idx === 0 ? 'bg-yellow-600/30 border border-yellow-500/50' :
                                    idx === 1 ? 'bg-gray-500/30 border border-gray-400/50' :
                                    idx === 2 ? 'bg-orange-600/30 border border-orange-500/50' :
                                    'bg-green-700/30'
                                }">
                                    <div class="flex items-center gap-3">
                                        <span class="text-xl">
                                            ${idx === 0 ? '🥇' : idx === 1 ? '🥈' : idx === 2 ? '🥉' : `${idx + 1}°`}
                                        </span>
                                        <div>
                                            <div class="font-semibold">${player.name}</div>
                                            <div class="text-xs ${player.paid ? 'text-green-400' : 'text-red-400'}">
                                                ${player.paid ? '✅ Pagado' : '❌ No pagado'}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-xl font-bold">${player.points}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Renderizar jugadores
        function renderJugadores() {
            return `
                <div class="bg-green-800/50 rounded-xl p-4 border border-green-700">
                    <h2 class="text-lg font-bold mb-4">👥 Gestión de Jugadores</h2>
                    <div class="space-y-3">
                        ${appData.players.map(player => `
                            <div class="bg-green-700/40 rounded-lg p-3 border border-green-600">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                                        👤
                                    </div>
                                    <div class="flex-1">
                                        <input value="${player.name}" 
                                               onchange="updatePlayerName(${player.id}, this.value)"
                                               class="w-full bg-transparent border-b border-green-600 focus:border-green-400 outline-none pb-1">
                                        <div class="flex gap-2 mt-2">
                                            <button onclick="togglePaid(${player.id})" 
                                                    class="px-3 py-1 rounded text-xs ${player.paid ? 'bg-green-600' : 'bg-red-600'}">
                                                ${player.paid ? '✅ Pagado' : '❌ No pagado'}
                                            </button>
                                            <span class="px-3 py-1 bg-blue-600 rounded text-xs">
                                                ${player.points} pts
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Renderizar partidas
        function renderPartidas() {
            return `
                <div class="bg-green-800/50 rounded-xl p-4 border border-green-700">
                    <h2 class="text-lg font-bold mb-4">🗓️ Fechas del Torneo</h2>
                    <div class="space-y-3">
                        <div class="bg-green-700/40 rounded-lg p-3">
                            <div class="font-semibold">12 Septiembre 2025</div>
                            <div class="text-sm opacity-80">Ya jugada ✅</div>
                        </div>
                        <div class="bg-green-700/40 rounded-lg p-3">
                            <div class="font-semibold">26 Septiembre 2025</div>
                            <div class="text-sm opacity-80">Próxima partida 🎯</div>
                        </div>
                        <div class="bg-green-700/40 rounded-lg p-3">
                            <div class="font-semibold">24 Octubre 2025</div>
                            <div class="text-sm opacity-80">Pendiente</div>
                        </div>
                        <div class="bg-green-700/40 rounded-lg p-3">
                            <div class="font-semibold">21 Noviembre 2025</div>
                            <div class="text-sm opacity-80">Pendiente</div>
                        </div>
                        <div class="bg-green-700/40 rounded-lg p-3">
                            <div class="font-semibold">12 Junio 2026</div>
                            <div class="text-sm opacity-80">🏆 Gran Final</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Renderizar reglas
        function renderReglas() {
            return `
                <div class="bg-green-800/50 rounded-xl p-4 border border-green-700">
                    <h2 class="text-lg font-bold mb-4">📜 Reglas del Torneo</h2>
                    <div class="space-y-4 text-sm">
                        <div>
                            <h3 class="font-bold text-green-300 mb-2">💰 Entrada</h3>
                            <ul class="space-y-1 pl-4">
                                <li>• Costo: $50 USD</li>
                                <li>• 💳 Pago a: Eliuth Triana</li>
                                <li>• Solo se acumulan puntos tras pagar</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h3 class="font-bold text-green-300 mb-2">🏆 Sistema de puntuación</h3>
                            <ul class="space-y-1 pl-4">
                                <li>• 🥇 1er lugar: 6 puntos</li>
                                <li>• 🥈 2do lugar: 3 puntos</li>
                                <li>• 🥉 3er lugar: 1 punto</li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="font-bold text-green-300 mb-2">📅 Fechas importantes</h3>
                            <ul class="space-y-1 pl-4">
                                <li>• 11 fechas oficiales</li>
                                <li>• Máximo 6 partidas flotantes</li>
                                <li>• Gran Final: 12 Junio 2026</li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="font-bold text-green-300 mb-2">🎖️ Finalistas</h3>
                            <ul class="space-y-1 pl-4">
                                <li>• Top 6 jugadores clasifican</li>
                                <li>• Se consideran 12 mejores mesas</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // Funciones de jugadores
        function updatePlayerName(id, name) {
            const player = appData.players.find(p => p.id === id);
            if (player) {
                player.name = name;
                saveData();
            }
        }

        function togglePaid(id) {
            const player = appData.players.find(p => p.id === id);
            if (player) {
                player.paid = !player.paid;
                saveData();
                setTab('jugadores'); // Refresh
            }
        }

        function addPlayer() {
            if (appData.players.length >= 15) {
                alert('Máximo 15 jugadores');
                return;
            }
            const newId = Math.max(...appData.players.map(p => p.id)) + 1;
            appData.players.push({
                id: newId,
                name: `Jugador ${newId}`,
                paid: false,
                points: 0
            });
            saveData();
            setTab('jugadores');
        }

        // Exportar/Importar
        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const blob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'poker_backup.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    appData = JSON.parse(e.target.result);
                    saveData();
                    setTab('dashboard');
                    alert('✅ Datos importados');
                } catch (error) {
                    alert('❌ Error al importar');
                }
            };
            reader.readAsText(file);
        }

        // Compartir
        function shareData() {
            const url = window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'Poker 2025/2026',
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    alert('🔗 Enlace copiado al portapapeles');
                });
            }
        }

        // Inicializar cuando carga la página
        window.addEventListener('load', init);
    </script>
</body>
</html>
